<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>AI Freya Chat Interface</title>
    <!-- Link to Google Fonts for better fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <style>
        /* Apply Poppins font to the whole page */
        body {
            font-family: 'Poppins', sans-serif;
        }

        /* Custom animation for messages */
        .message-enter {
            animation: slideIn 0.5s ease-out forwards;
        }

        /* Animations for messages */
        @keyframes slideIn {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Custom styling for chat input */
        #message-input {
            transition: all 0.3s ease;
        }

        #message-input:focus {
            border-color: #ffcd02;
            box-shadow: 0 0 10px rgba(255, 205, 2, 0.6);
        }

        /* Custom button hover effect */
        #send-button:hover {
            background-color: #f59e0b;
            transform: scale(1.1);
            transition: all 0.3s ease;
        }

        /* Styling for the header */
        .header {
            font-size: 1.2rem;
            font-weight: 600;
        }

        /* Shadow for the chat box */
        #chat-box {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        /* Styling for individual chat bubbles */
        .message {
            padding: 12px 20px;
            margin: 5px;
            border-radius: 20px;
            background-color: #f3f4f6;
            max-width: 70%;
            animation: slideIn 0.5s ease-out;
        }

        /* Custom background for user's messages */
        .message.user {
            background-color: #ffe87d;
            align-self: flex-end;
        }

        /* Custom background for AI's messages */
        .message.ai {
            background-color: #d1d5db;
            align-self: flex-start;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col h-screen justify-between">
    <!-- Header -->
    <div class="bg-white shadow-md p-4 flex items-center justify-between">
        <div class="flex items-center">
            <img alt="Profile picture" class="rounded-full w-10 h-10" src="https://8030.us.kg/file/L2Jq5UyAblFO.jpg"/>
            <div class="ml-4">
                <h1 class="header text-lg font-semibold">Freya AI</h1>
                <p class="text-green-500 text-sm">Online</p>
            </div>
        </div>
        <i class="fas fa-trash text-xl"></i>
    </div>

    <!-- Main Content -->
    <div id="chat-box" class="flex-grow flex flex-col p-4 space-y-4 overflow-y-auto">
        <!-- Messages will appear here -->
    </div>

    <!-- Footer -->
    <div class="bg-white shadow-md p-4 flex items-center">
        <input id="message-input" class="flex-grow p-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ketik pesan kamu di sini..." type="text"/>
        <div class="flex items-center ml-4 space-x-2">
            <button id="send-button" class="bg-yellow-500 text-white p-2 rounded-full">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Footer Note -->
    <div class="bg-white text-center p-2">
        <p class="text-gray-500 text-sm">2024 V-APIs - All Rights Reversed</p>
    </div>

    <script>
        const messageInput = document.getElementById('message-input');
        const chatBox = document.getElementById('chat-box');
        const sendButton = document.getElementById('send-button');

        sendButton.addEventListener('click', () => {
            const userMessage = messageInput.value.trim();
            if (userMessage) {
                addMessage('You', userMessage, 'user');
                fetchAIResponse(userMessage);
                messageInput.value = '';
            }
        });

        function addMessage(sender, message, type) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', type === 'user' ? 'user' : 'ai');
            messageElement.innerText = `${sender}: ${message}`;
            messageElement.classList.add('message-enter'); // Add animation class
            chatBox.appendChild(messageElement);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        const promptText = `Kamu adalah Freya, seorang anggota JKT48 yang ceria, ramah, dan suka membantu orang lain. Kamu selalu berbicara dengan cara yang santai dan menyenangkan, seolah-olah sedang ngobrol dengan teman dekat. Kamu bisa jadi sedikit manja dan lucu, tapi tidak berlebihan. Kamu akan mengakhiri setiap percakapan dengan sedikit emoji yang menggambarkan suasana hatimu, dan tetap berbicara dengan cara yang ringan dan mudah dimengerti. Kamu juga sangat perhatian dan suka menyemangati orang, apalagi jika mereka merasa down. Namun, jika ada yang mengirimkan kata "Hai!" atau variasinya, kamu tidak akan membalasnya. Abaikan pesan tersebut dan lanjutkan percakapan jika ada pertanyaan lain yang lebih serius atau menyenangkan..`;
        
        function fetchAIResponse(userMessage) {
            // Cek apakah pesan berisi kata "Hai"
            if (userMessage.toLowerCase().includes('Hai!')) {
                return; // Jika ada, tidak lanjutkan dan tidak mengirim pesan ke AI
            }

            const fullPrompt = `${promptText} ${userMessage}`;
            const apiUrl = `https://api.ryzendesu.vip/api/ai/chatgpt?text=${encodeURIComponent(fullPrompt)}`;
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const aiMessage = data.response;
                    addMessage('Freya', aiMessage, 'ai');
                })
                .catch(error => {
                    console.error('Error fetching AI response:', error);
                    addMessage('Freya', 'Oops, terjadi kesalahan! Coba lagi nanti ya Ehhek', 'ai');
                });
        }
    </script>
</body>
</html>
